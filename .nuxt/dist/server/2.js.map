{"version":3,"file":"2.js","sources":["webpack:///./utils/api.js","webpack:///./pages/editor/index.vue?5e32","webpack:///./pages/editor/index.vue","webpack:///./pages/editor/index.vue?9495","webpack:///./pages/editor/index.vue?30d5"],"sourcesContent":["import { Axios } from '@/plugins/http.js';\r\n\r\n//登录\r\nexport const signIn = (params) =>\r\n\tAxios({\r\n\t\turl: '/api/users/login',\r\n\t\tdata: params,\r\n\t});\r\n\r\n// 注册\r\nexport const register = (params) =>\r\n\tAxios({\r\n\t\turl: '/api/users',\r\n\t\tdata: params,\r\n\t});\r\n\r\n// 获取文章列表\r\nexport const getArticles = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: '/api/articles',\r\n\t\tparams,\r\n\t});\r\n\r\n// 获取标签列表\r\nexport const getTags = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: '/api/tags',\r\n\t\tparams,\r\n\t});\r\n\r\n// 获取个人关注的文章列表\r\nexport const getFeedArticle = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: '/api/articles/feed',\r\n\t\tparams,\r\n\t});\r\n\r\n// 点赞\r\nexport const addFavorite = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'post',\r\n\t\turl: `/api/articles/${params}/favorite`,\r\n\t});\r\n\r\n// 删除点赞\r\nexport const delFavorite = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'delete',\r\n\t\turl: `/api/articles/${params}/favorite`,\r\n\t});\r\n\r\n// 获取文章详情\r\nexport const getArticle = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: `/api/articles/${params}`,\r\n\t});\r\n\r\n//获取文章评论列表\r\nexport const getComments = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: `/api/articles/${params}/comments`,\r\n\t});\r\n\r\n//发表评论\r\nexport const makeComment = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'post',\r\n\t\turl: `/api/articles/${params.article}/comments`,\r\n\t\tdata: params.data,\r\n\t});\r\n\r\n// 删除评论\r\nexport const delComment = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'delete',\r\n\t\turl: `/api/articles/${params.slug}/comments/${params.id}`,\r\n\t});\r\n\r\n// addFollow\r\nexport const addFollow = (params) =>\r\n\tAxios({\r\n\t\turl: `api/profiles/${params}/follow`,\r\n\t});\r\n\r\n// delFollow\r\nexport const delFollow = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'delete',\r\n\t\turl: `api/profiles/${params}/follow`,\r\n\t});\r\n\r\n// 设置个人信息\r\nexport const settingUser = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'put',\r\n\t\turl: '/api/ersu',\r\n\t\tdata: params,\r\n\t});\r\n\r\n//更新个人信息\r\nexport const updateUser = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'put',\r\n\t\turl: '/api/user',\r\n\t\tdata: params,\r\n\t});\r\n\r\n// 获取个人信息\r\nexport const getUserInfo = (params) =>\r\n\tAxios({\r\n\t\tmethod: 'get',\r\n\t\turl: `/api/profiles/${params}`,\r\n\t});\r\n\r\n// 发布文章\r\nexport const pubArticle = (params) => Axios({\r\n    method:'post',\r\n    url:'/api/articles',\r\n    data:params\r\n})\r\n\r\n// 删除文章\r\nexport const delArticle = (params) => Axios({\r\n    method:'delete',\r\n    url:`/api/articles/${params}`\r\n})\r\n\r\n// 修改文章\r\nexport const updateArticle = (params) => Axios({\r\n    method:'put',\r\n    url:`/api/articles/${params.slug}`,\r\n    data:params.data\r\n})","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-page\"},[_vm._ssrNode(\"<div class=\\\"container page\\\"><div class=\\\"row\\\"><div class=\\\"col-md-10 offset-md-1 col-xs-12\\\"><form><fieldset><fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"Article Title\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+(_vm._ssrAttr(\"value\",(_vm.article.title)))+\" class=\\\"form-control form-control-lg\\\"></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"What's this article about?\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+(_vm._ssrAttr(\"value\",(_vm.article.description)))+\" class=\\\"form-control\\\"></fieldset> <fieldset class=\\\"form-group\\\"><textarea rows=\\\"8\\\" placeholder=\\\"Write your article (in markdown)\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+\" class=\\\"form-control\\\">\"+_vm._ssrEscape(_vm._s(_vm.article.body))+\"</textarea></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"Enter tags\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+(_vm._ssrAttr(\"value\",(_vm.article.tag)))+\" class=\\\"form-control\\\"> <div class=\\\"tag-list\\\"></div></fieldset> \"+((_vm.params && _vm.params.slug)?(\"<button type=\\\"button\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+\" class=\\\"btn btn-lg pull-xs-right btn-primary\\\">\\n                                Update Article\\n                            </button>\"):(\"<button type=\\\"button\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.pending))+\" class=\\\"btn btn-lg pull-xs-right btn-primary\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\tPublish Article\\n\\t\\t\\t\\t\\t\\t\\t</button>\"))+\"</fieldset></form></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { pubArticle, getArticle, updateArticle } from '@/utils/api.js'\r\nexport default {\r\n\tmiddleware: 'authenticated',\r\n\tname: 'editor',\r\n    asyncData({ params }) {\r\n        return {\r\n            params,\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            pending:false,\r\n            article:{\r\n                body:'',\r\n                description:'',\r\n                tag:'',\r\n                title:''\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        if(this.params && this.params.slug){\r\n            getArticle(this.params.slug).then((res) => {\r\n                let { article } = res;\r\n                this.article = {\r\n                    body:article.body,\r\n                    description:article.description,\r\n                    tag:article.tagList.join(','),\r\n                    title:article.title\r\n                }\r\n            })\r\n        }\r\n    },\r\n    methods:{\r\n        // 发布文章\r\n        postArticle(){\r\n            let { article,pending } = this;\r\n            if(pending) return;\r\n            this.pending = true;\r\n            if(article.tag){\r\n                article.tagList = article.tag.split(',')\r\n            }\r\n            pubArticle(article).then((res) => {\r\n                this.pending = false;\r\n                this.$router.push(`/article/${res.article.slug}`)\r\n            }).catch(() => {\r\n                this.pending = false;\r\n            })\r\n        },\r\n        // 更新文章\r\n        renewArticle(){\r\n            let { article,params,pending } = this;\r\n            if(pending) return;\r\n            this.pending = true;\r\n            if(article.tag){\r\n                article.tagList = article.tag.split(',')\r\n            }\r\n            updateArticle({\r\n                slug:params.slug,\r\n                data:{article,}\r\n            }).then(() => {\r\n                this.pending = false;\r\n                this.$router.push(`/article/${params.slug}`)\r\n            }).catch(() => {\r\n                this.pending = false;\r\n            })\r\n        }\r\n    }\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5732f68c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"887fa576\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AADA;AACA;AAIA;AAEA;AACA;AAFA;AACA;AAKA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AACA;AAHA;AACA;AAMA;AAEA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAHA;AACA;AAMA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;ACrIA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AASA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AAhCA;;ACvEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{194:function(t,e,n){"use strict";n.d(e,"p",(function(){return o})),n.d(e,"o",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"e",(function(){return v})),n.d(e,"g",(function(){return h})),n.d(e,"i",(function(){return _})),n.d(e,"m",(function(){return O})),n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return C})),n.d(e,"f",(function(){return w})),n.d(e,"r",(function(){return y})),n.d(e,"l",(function(){return k})),n.d(e,"n",(function(){return x})),n.d(e,"c",(function(){return I})),n.d(e,"q",(function(){return H}));var r=n(63),o=function(t){return Object(r.a)({url:"/api/users/login",data:t})},c=function(t){return Object(r.a)({url:"/api/users",data:t})},l=function(t){return Object(r.a)({method:"get",url:"/api/articles",params:t})},d=function(t){return Object(r.a)({method:"get",url:"/api/tags",params:t})},f=function(t){return Object(r.a)({method:"get",url:"/api/articles/feed",params:t})},m=function(t){return Object(r.a)({method:"post",url:"/api/articles/".concat(t,"/favorite")})},v=function(t){return Object(r.a)({method:"delete",url:"/api/articles/".concat(t,"/favorite")})},h=function(t){return Object(r.a)({method:"get",url:"/api/articles/".concat(t)})},_=function(t){return Object(r.a)({method:"get",url:"/api/articles/".concat(t,"/comments")})},O=function(t){return Object(r.a)({method:"post",url:"/api/articles/".concat(t.article,"/comments"),data:t.data})},j=function(t){return Object(r.a)({method:"delete",url:"/api/articles/".concat(t.slug,"/comments/").concat(t.id)})},C=function(t){return Object(r.a)({url:"api/profiles/".concat(t,"/follow")})},w=function(t){return Object(r.a)({method:"delete",url:"api/profiles/".concat(t,"/follow")})},y=function(t){return Object(r.a)({method:"put",url:"/api/user",data:t})},k=function(t){return Object(r.a)({method:"get",url:"/api/profiles/".concat(t)})},x=function(t){return Object(r.a)({method:"post",url:"/api/articles",data:t})},I=function(t){return Object(r.a)({method:"delete",url:"/api/articles/".concat(t)})},H=function(t){return Object(r.a)({method:"put",url:"/api/articles/".concat(t.slug),data:t.data})}},268:function(t,e,n){"use strict";n.r(e);var r=n(19),o=n(10),c=n(4),l=(n(37),n(38),n(13),n(39),n(30),n(23),n(24),n(49),n(50),n(194)),d=(n(51),{name:"author",data:function(){return{pendding:!1}},props:{articleInfo:{type:Object,default:function(){}},user:{type:Object,default:function(){}}},methods:{favorite:function(){this.articleInfo.favoritedabled||(this.isLogin(),this.$emit("favoriteHandel"))},follow:function(){this.articleInfo.followabled||(this.isLogin(),this.$emit("followHandel"))},isLogin:function(){var t=this.user;t&&t.token||this.$router.push("/login")},deleteArticle:function(){var t=this;this.pendding||(this.pendding=!0,Object(l.c)(this.articleInfo.slug).then((function(){t.pendding=!1,t.$router.replace("/")})).catch((function(){t.pendding=!1})))}}}),f=n(31),m=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-meta"},[n("nuxt-link",{attrs:{to:{name:"profile",params:{username:t.articleInfo.author.username}}}},[n("img",{attrs:{src:t.articleInfo.author.image}})]),t._v(" "),n("div",{staticClass:"info"},[n("nuxt-link",{staticClass:"author",attrs:{to:{name:"profile",params:{username:t.articleInfo.author.username}}}},[t._v("\n\t\t\t\t"+t._s(t.articleInfo.author.username)+"\n\t\t\t")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("dateFormat")(t.articleInfo.createdAt,"MMM DD,YYYY")))])],1),t._v(" "),t.articleInfo.author.username===t.user.username?[n("nuxt-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:{name:"editor",params:{slug:t.articleInfo.slug}}}},[n("i",{staticClass:"ion-edit"}),t._v(" Edit Article\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:t.deleteArticle}},[n("i",{staticClass:"ion-trash-a"}),t._v(" Delete Article\n            ")])]:[n("button",{staticClass:"btn btn-sm btn-outline-secondary",class:{active:t.articleInfo.author.following},on:{click:t.follow}},[n("i",{staticClass:"ion-plus-round"}),t._v(" "+t._s(t.articleInfo.author.following?"Unfollow":"Follow")+"\n                "+t._s(t.articleInfo.author.username)+"\n                ")]),t._v("\n\t\t      \n            "),n("button",{staticClass:"btn btn-sm btn-outline-primary",class:{active:t.articleInfo.favorited},on:{click:t.favorite}},[n("i",{staticClass:"ion-heart"}),t._v(" Favorite Post\n                "),n("span",{staticClass:"counter"},[t._v("("+t._s(t.articleInfo.favoritesCount)+")")])])]],2)}),[],!1,null,null,null).exports,v=n(212),h=n.n(v);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j={name:"article",asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c,d,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,r=t.store,e.next=3,Promise.all([Object(l.g)(n.slug),Object(l.i)(n.slug)]);case 3:return c=e.sent,d=Object(o.a)(c,2),f=d[0],m=d[1],v=new h.a,f.article.body=v.render(f.article.body),f.article.favoritedabled=!1,f.article.followabled=!1,e.abrupt("return",O(O(O({},f),m),{},{user:r.state.user}));case 12:case"end":return e.stop()}}),e)})))()},data:function(){return{commentText:""}},methods:{favoriteHandel:function(){var article=this.article;article.favoritedabled=!0,article.favorited?Object(l.e)(article.slug).then((function(){article.favorited=!1,article.favoritesCount-=1,article.favoritedabled=!1})):Object(l.a)(article.slug).then((function(){article.favorited=!0,article.favoritesCount+=1,article.favoritedabled=!1}))},followHandel:function(){var article=this.article;article.followabled=!0,article.author.following?Object(l.f)(article.author.username).then((function(){article.author.following=!1,article.followabled=!1})):Object(l.b)(article.author.username).then((function(){article.author.following=!0,article.followabled=!1}))},comment:function(){var t=this,article=this.article,e=this.commentText;Object(l.m)({article:article.slug,data:{comment:{body:e}}}).then((function(e){t.comments.unshift(e.comment)}))},deleteComment:function(t){var e=this,article=this.article;Object(l.d)({slug:article.slug,id:t}).then((function(){e.comments.forEach((function(n,i){n.id===t&&e.comments.splice(i,1)}))}))}},head:function(){return{title:"".concat(this.article.title," - realworld"),meta:[{hid:"description",name:"description",content:this.article.description}]}},components:{author:m}},C=Object(f.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-page"},[n("div",{staticClass:"banner"},[n("div",{staticClass:"container"},[n("h1",[t._v(t._s(t.article.title))]),t._v(" "),n("author",{attrs:{"article-info":t.article,user:t.user},on:{favoriteHandel:t.favoriteHandel,followHandel:t.followHandel}})],1)]),t._v(" "),n("div",{staticClass:"container page"},[n("div",{staticClass:"row article-content"},[n("div",{staticClass:"col-md-12",domProps:{innerHTML:t._s(t.article.body)}}),t._v(" "),n("ul",{staticClass:"tag-list"},t._l(t.article.tagList,(function(e){return n("li",{key:e,staticClass:"tag-default tag-pill tag-outline"},[t._v("\n\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t")])})),0)]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"article-actions"},[n("author",{attrs:{"article-info":t.article,user:t.user},on:{favoriteHandel:t.favoriteHandel,followHandel:t.followHandel}})],1),t._v(" "),t.user?n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-md-8 offset-md-2"},[n("form",{staticClass:"card comment-form"},[n("div",{staticClass:"card-block"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],staticClass:"form-control",attrs:{placeholder:"Write a comment...",rows:"3"},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"card-footer"},[n("img",{staticClass:"comment-author-img",attrs:{src:t.user.image}}),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{disabled:!t.commentText},on:{click:function(e){return e.preventDefault(),t.comment(e)}}},[t._v("\n\t\t\t\t\t\t\tPost Comment\n\t\t\t\t\t\t")])])]),t._v(" "),t._l(t.comments,(function(e){return n("div",{key:e.id,staticClass:"card"},[n("div",{staticClass:"card-block"},[n("p",{staticClass:"card-text"},[t._v(t._s(e.body))])]),t._v(" "),n("div",{staticClass:"card-footer"},[n("nuxt-link",{staticClass:"comment-author",attrs:{to:{name:"profile",params:{username:e.author.username}}}},[n("img",{staticClass:"comment-author-img",attrs:{src:e.author.image}})]),t._v("\n\t\t\t\t\t\t \n\t\t\t\t\t\t"),n("nuxt-link",{staticClass:"comment-author",attrs:{to:{name:"profile",params:{username:e.author.username}}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.author.username)+"\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"date-posted"},[t._v(t._s(t._f("dateFormat")(e.createdAt,"MMM DD,YYYY")))]),t._v(" "),n("span",{staticClass:"mod-options"},[t.user&&e.author.username===t.user.username?n("i",{staticClass:"ion-trash-a",on:{click:function(n){return t.deleteComment(e.id)}}}):t._e()])],1)])}))],2)]):t._e()])])}),[],!1,null,null,null);e.default=C.exports}}]);